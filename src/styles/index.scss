/* 1) All @use first */
@use '@carbon/styles';
@use '@carbon/styles/scss/type' as type;
/* Bring in your markdown + global overrides */
@use './components/carbon-markdown';

/* 2) Then CSS @import(s) */
@import '@ibm/plex/css/ibm-plex.css';

/* Force light (g10) and dark (g90) theme tokens */
:root[data-theme="g10"] {
  --cds-background: #ffffff;
  --cds-text-primary: #161616;
  --cds-text-secondary: #525252;
  --cds-interactive: #0f62fe;
  --cds-link-primary: #0f62fe;
  --cds-layer: #f4f4f4;
  --cds-layer-hover: #e0e0e0;
}

:root[data-theme="g90"] {
  --cds-background: #161616;
  --cds-text-primary: #f4f4f4;
  --cds-text-secondary: #c6c6c6;
  --cds-interactive: #0f62fe;
  --cds-link-primary: #78a9ff;
  --cds-layer: #262626;
  --cds-layer-hover: #393939;
}

/* Global styles */
body {
  margin: 0;
  font-family: "IBM Plex Sans", -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--cds-background);
  color: var(--cds-text-primary);
}

h1, h2 { color: var(--cds-text-primary); }

a {
  color: var(--cds-link-primary);
  text-decoration: none;
  &:hover { text-decoration: underline; }
}

ul { list-style: none; padding: 0; }

li {
  margin: 0.25rem 0;
  font-size: 0.95rem;
  line-height: 1.4;
  color: var(--cds-text-secondary);
}

/* Search input contrast fix (light + dark) */
.cds--search .cds--text-input { background: var(--cds-layer); color: var(--cds-text-primary); }
.cds--search .cds--text-input::placeholder { color: var(--cds-text-secondary); opacity: 1; }
.cds--search .cds--search-close { color: var(--cds-text-secondary); }

/* Pills */
.pill-row {
  margin: 1rem 0;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}
.pill {
  padding: 0.5rem 1rem;
  border: 1px solid var(--cds-layer);
  border-radius: 0;
  cursor: pointer;
  background: var(--cds-layer);
  color: var(--cds-text-primary);
  font-size: 0.875rem;
  transition: background 0.2s, color 0.2s;
  &:hover { background: var(--cds-layer-hover); }
  &.active {
    background: var(--cds-interactive);
    border-color: var(--cds-interactive);
    color: #fff;
  }
}

/* Chart */
.chart-scroll { overflow-x: auto; -webkit-overflow-scrolling: touch; }
.chart-container { min-width: 600px; height: 500px; }

/* Footer */
.app-footer {
  text-align: left;
  padding: 1rem 2rem;
  color: var(--cds-text-secondary);
  small {
    @include type.type-style('helper-text-01');
    font-size: 0.75rem; /* backup */
    line-height: 1.2;
    display: block;
  }
}

/* Collection entries with hanging punctuation */
.entry-list {
  list-style: none;
  margin: 1rem 0;
  padding: 0;
  li {
    position: relative;
    margin: 0.5rem 0;
    padding-left: 1.25rem;
    line-height: 1.5;
    font-size: 0.95rem;
    color: var(--cds-text-primary);
    &::before {
      content: "â€“";
      position: absolute;
      left: 0;
      color: var(--cds-text-secondary);
    }
  }
}

/* Home page layout adjustments */
.home-heading { margin-bottom: 0.25rem; }
.home-meta { margin-bottom: 1.5rem; }
.home-search { margin-bottom: 1.5rem; }
.pill-row { margin: 1rem 0; }

/* Aâ€“Z section headings on home page */
.alpha-section { margin-top: 2rem; }
.alpha-section h3 { margin-bottom: 0.5rem; }

/* Make Home list links look like prod */
.entry-list a { color: var(--cds-link-primary) !important; text-decoration: none; }
.entry-list a:hover { text-decoration: underline; }

/* Venue styling inside the link */
.entry-list em { font-style: italic; color: var(--cds-text-secondary); }

/* Document metadata styling */
.doc-header { margin-bottom: 2rem; }
.doc-meta { font-size: 0.9rem; color: var(--cds-text-secondary); }
.doc-revision { margin-top: 2rem !important; margin-bottom: 2rem; }

/* ------------------------------------------------------------------ */
/* ðŸŸ¢ Mobile safety & wrapping tweaks */
html, body { max-width: 100%; overflow-x: hidden; }
.doc-header,
.doc-header h2,
.cds--breadcrumb,
.cds--breadcrumb a,
.carbon-markdown,
.entry-list li,
.entry-list li a {
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;
}
.cds--breadcrumb a { white-space: normal; display: inline; }
@media (max-width: 640px) {
  .doc-header h2 { line-height: 1.2; overflow-wrap: anywhere; hyphens: auto; }
  .carbon-markdown pre { white-space: pre-wrap; word-wrap: break-word; }
}

/* Images + tables inside markdown scale down */
.carbon-markdown table,
.carbon-markdown img { max-width: 100%; width: 100%; }

/* ---- Print / PDF polish ---- */
@media print {
  @page { size: A4; margin: 16mm; }

  /* Hide chrome that shouldn't appear in PDF */
  .cds--breadcrumb,
  .home-search,
  .pill-row,
  .doc-separator,
  .doc-actions,       /* hides the Download buttons */
  .app-footer,
  .cds--btn,          /* any Carbon button (fallback) */
  .cds--search {      /* any Carbon search (fallback) */
    display: none !important;
  }

  /* Keep Carbon colors in print */
  body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

  /* Expand content width for PDF */
  .carbon-markdown { max-width: 100% !important; }

  /* Show link targets in print */
  .carbon-markdown a[href]::after {
    content: " (" attr(href) ")";
    font-size: 0.85em;
    word-break: break-all;
  }

  /* Keep highlight visible */
  mark { background: yellow; padding: 0 .08em; }

  /* Avoid awkward page breaks */
  h1, h2, h3 { break-after: avoid; }
  p, ul, ol, table, blockquote { break-inside: avoid; }

  /* No shadows/borders that look odd in print */
  * { box-shadow: none !important; }
}

/* Mobile: stack download buttons vertically */
@media (max-width: 640px) {
  .doc-actions {
    display: flex;
    flex-direction: column;
    gap: 0.5rem; /* spacing between stacked buttons */
  }
  .doc-actions .cds--btn {
    width: 100%; /* make each button fill container */
  }
}